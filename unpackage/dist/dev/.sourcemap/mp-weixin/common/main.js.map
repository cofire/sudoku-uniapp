{"version":3,"sources":["webpack:///D:/work/2020/cx/tanker-uniapp/main.js","webpack:///D:/work/2020/cx/tanker-uniapp/App.vue?81e9","webpack:///D:/work/2020/cx/tanker-uniapp/App.vue?27bf","webpack:///D:/work/2020/cx/tanker-uniapp/App.vue","webpack:///D:/work/2020/cx/tanker-uniapp/App.vue?5dab","webpack:///D:/work/2020/cx/tanker-uniapp/App.vue?3001","webpack:///D:/work/2020/cx/tanker-uniapp/pages/Common.vue?db2f","webpack:///D:/work/2020/cx/tanker-uniapp/pages/Common.vue?08a6","webpack:///D:/work/2020/cx/tanker-uniapp/pages/Common.vue"],"names":["msg","title","duration","mask","icon","Boolean","uni","showToast","json","type","Promise","resolve","setTimeout","Json","prePage","pages","getCurrentPages","length","$vm","Vue","config","productionTip","prototype","$fire","$msg","$base_api","base_api","$json","$prePage","global","Common","use","MinRequest","MinCache","MinRouter","BaseUtils","App","mpType","app","minRequest","minRouter","$mount","data","canIUse","wx","onLaunch","that","onShow","_this","isLogin","onHide","console","log","USER_ID_PREFIX","USER_INFO","USER_PHONE","MALL_ID","AUTHORIZATION","RERRESH_TOKEN","CART_LIST","timeOut","MD5Util","require","uploadFile","count","url","chooseImage","success","choose_res","files","tempFiles","filePaths","tempFilePaths","JSON","stringify","uploadTask","name","filePath","upload_res","statusCode","errMsg","onProgressUpdate","res","progress","totalBytesSent","totalBytesExpectedToSend","wxPay","totalFee","orderId","code","login","provider","login_res","unifiedOrderParam","Object","$minApi","uniapp_get","unifiedOrder","then","prepayId","nonceStr","appId","mchKey","timeStamp","String","Date","now","payDataA","payDataB","paySign","MD5","toUpperCase","refundReason","requestPayment","package","signType","updatePayStatus","fail","err","$openPage","prepareLoginParam","user_res","userInfo","paramObj","iv","rawData","signature","encryptedData","uniapp_post","updateOrder","orderStatus","tempPayStatus","refundStatus","navigateTo","userId","$cache","get","undefined","hasPhone","phone","isCardNo","num","isNaN","len","re15","re18","test","isMobilePhone","source","regex"],"mappings":"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","file":"common/main.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\r\nimport Vue from 'vue'\r\nimport App from './App'\r\n\r\nimport Json from './Json' //测试用数据\r\n\r\nimport base_api from 'config/Base_api' // 统一请求URI\r\nimport MinRequest from './config/MinRequest'\r\nimport minRequest from './config/api'\r\nimport MinCache from './config/MinCache'\r\nimport MinRouter from './config/MinRouter'\r\nimport BaseUtils from './config/BaseUtils'\r\nimport minRouter from './router'\r\nimport Common from './pages/Common.vue'\r\n/**\r\n *  因工具函数属于公司资产, 所以直接在Vue实例挂载几个常用的函数\r\n *  所有测试用数据均存放于根目录json.js\r\n *  \r\n *  css部分使用了App.vue下的全局样式和iconfont图标，有需要图标库的可以留言。\r\n *  示例使用了uni.scss下的变量, 除变量外已尽量移除特有语法,可直接替换为其他预处理器使用\r\n */\r\nconst msg = (title, duration=1500, mask=false, icon='none')=>{\r\n\t//统一提示方便全局修改\r\n\tif(Boolean(title) === false){\r\n\t\treturn;\r\n\t}\r\n\tuni.showToast({\r\n\t\ttitle,\r\n\t\tduration,\r\n\t\tmask,\r\n\t\ticon\r\n\t});\r\n}\r\nconst json = type=>{\r\n\t//模拟异步请求数据\r\n\treturn new Promise(resolve=>{\r\n\t\tsetTimeout(()=>{\r\n\t\t\tresolve(Json[type]);\r\n\t\t}, 500)\r\n\t})\r\n}\r\n\r\nconst prePage = ()=>{\r\n\tlet pages = getCurrentPages();\r\n\tlet prePage = pages[pages.length - 2];\r\n\r\n\r\n\r\n\treturn prePage.$vm;\r\n}\r\n\r\n\r\nVue.config.productionTip = false\r\nVue.prototype.$fire = new Vue();\r\nVue.prototype.$msg = msg;\r\nVue.prototype.$base_api = base_api;\r\nVue.prototype.$json = json;\r\nVue.prototype.$prePage = prePage;\r\nVue.prototype.global = Common\r\nVue.use(MinRequest)\r\nVue.use(MinCache)\r\nVue.use(MinRouter)\r\nVue.use(BaseUtils)\r\nApp.mpType = 'app'\r\n\r\nconst app = new Vue({\r\n    ...App,\r\n\tminRequest,\r\n\tminRouter,\r\n})\r\napp.$mount()","var render, staticRenderFns, recyclableRender, components\nvar renderjs\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"work/2020/cx/tanker-uniapp/App.vue\"\nexport default component.exports","import mod from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"","\r\nexport default {\r\n\r\n\tdata: {\r\n\t\tcanIUse: wx.canIUse('button.open-type.getUserInfo'),\r\n\t},\r\n\tonLaunch: function() {\r\n\t\tlet that = this;\r\n\t},\r\n\tonShow: function() {\r\n\t\tlet _this = this;\r\n\t\tlet isLogin = _this.global.isLogin(_this);\r\n\t\tif (!isLogin) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t},\r\n\tonHide: function() {\r\n\t\tconsole.log('App Hide');\r\n\t}\r\n};\r\n","import mod from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1587446402253\n      var cssReload = require(\"D:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","var render, staticRenderFns, recyclableRender, components\nvar renderjs\nimport script from \"./Common.vue?vue&type=script&lang=js&\"\nexport * from \"./Common.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"work/2020/cx/tanker-uniapp/pages/Common.vue\"\nexport default component.exports","import mod from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Common.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Common.vue?vue&type=script&lang=js&\"","//\r\n\r\n/* 缓存的userId前缀 */\r\nconst USER_ID_PREFIX = '_userId';\r\n\r\nconst USER_INFO = '_userInfo';\r\n\r\nconst USER_PHONE = '_phone';\r\n\r\n/* 缓存的商城mallId */\r\nconst MALL_ID = '_mallId';\r\n\r\n/*  认证的token信息 */\r\nconst AUTHORIZATION = '_token';\r\n\r\n/* refreshToken，用于换取accessToken */\r\nconst RERRESH_TOKEN = '_refresh_token';\r\n\r\n/** 未登录时购物车列表*/\r\nconst CART_LIST = '_cartList';\r\n\r\n/** 未登录购物车过期时间*/\r\nconst timeOut = 7200;\r\n\r\nvar MD5Util = require('../config/md5.js');\r\nimport Vue from 'vue';\r\n\r\n/**\r\n * @param String name multipart提交时，表单的项目名，默认为：file\r\n * 如果name的值不填或者填的 值相同，导致服务端读取文件时之后只能读取一个文件\r\n * @param String url 服务器地址\r\n */\r\nfunction uploadFile(count, url) {\r\n\tuni.chooseImage({\r\n\t\tcount: count, //最多可以选择的图片张数\r\n\t\tsuccess(choose_res) {\r\n\t\t\tlet files = choose_res.tempFiles;\r\n\t\t\tlet filePaths = choose_res.tempFilePaths;\r\n\t\t\tconsole.log(JSON.stringify(choose_res));\r\n\t\t\tconst uploadTask = uni.uploadFile({\r\n\t\t\t\turl: url,\r\n\t\t\t\tname: 'file',\r\n\t\t\t\tfilePath: filePaths[0], //上传的文件列表，使用files时，name和filePath不生效\r\n\t\t\t\tsuccess: function(upload_res) {\r\n\t\t\t\t\tlet data = upload_res.data;\r\n\t\t\t\t\tlet statusCode = upload_res.statusCode;\r\n\t\t\t\t\tlet errMsg = upload_res.errMsg;\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tuploadTask.onProgressUpdate(res => {\r\n\t\t\t\tconsole.log('上传进度{}', res.progress);\r\n\t\t\t\tconsole.log('已上传的数据长度{}', res.totalBytesSent);\r\n\t\t\t\tconsole.log('需要上传的数据总长度{}', res.totalBytesExpectedToSend);\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n}\r\n// 调用微信支付接口\r\nfunction wxPay(totalFee, orderId, that, type) {\r\n\tlet code;\r\n\tuni.login({\r\n\t\tprovider: 'weixin',\r\n\t\tsuccess(login_res) {\r\n\t\t\tlet unifiedOrderParam = new Object();\r\n\t\t\tunifiedOrderParam.orderId = orderId;\r\n\t\t\tunifiedOrderParam.code = login_res.code;\r\n\t\t\tthat.$minApi.uniapp_get(that.$base_api.unifiedOrder, unifiedOrderParam).then(res => {\r\n\t\t\t\tif (res.success) {\r\n\t\t\t\t\tlet prepayId = res.data.prepayId;\r\n\t\t\t\t\tlet nonceStr = res.data.nonceStr;\r\n\t\t\t\t\tlet appId = res.data.appId;\r\n\t\t\t\t\tlet mchKey = res.data.mchKey;\r\n\t\t\t\t\tlet timeStamp = String(Date.now());\r\n\t\t\t\t\tlet payDataA = 'appId=' + appId + '&nonceStr=' + nonceStr + '&package=prepay_id=' + prepayId + '&signType=MD5&timeStamp=' + timeStamp;\r\n\t\t\t\t\tlet payDataB = payDataA + '&key=' + mchKey;\r\n\t\t\t\t\tlet paySign = MD5Util.MD5(payDataB).toUpperCase();\r\n\t\t\t\t\tlet refundReason = '';\r\n\t\t\t\t\tconsole.log('签名的字符串', paySign);\r\n\t\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\t\tprovider: 'wxpay',\r\n\t\t\t\t\t\ttimeStamp: timeStamp,\r\n\t\t\t\t\t\tnonceStr: nonceStr,\r\n\t\t\t\t\t\tpackage: 'prepay_id=' + prepayId,\r\n\t\t\t\t\t\tsignType: 'MD5',\r\n\t\t\t\t\t\tpaySign: paySign,\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\tupdatePayStatus(orderId, type, that, refundReason);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\t\tthat.$msg('订单支付失败，请重新支付', JSON.stringify(err));\r\n\t\t\t\t\t\t\tthat.$openPage('order');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthat.$msg('调用统一下单接口失败{}', res.msg);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n}\r\n\r\n//封装登录参数\r\nfunction prepareLoginParam(user_res) {\r\n\tlet userInfo = user_res.userInfo;\r\n\tlet paramObj = new Object();\r\n\tuserInfo.iv = user_res.iv;\r\n\tuserInfo.rawData = user_res.rawData;\r\n\tuserInfo.errMsg = user_res.errMsg;\r\n\tuserInfo.signature = user_res.signature;\r\n\tuserInfo.encryptedData = user_res.encryptedData;\r\n\tparamObj.userInfo = userInfo;\r\n\treturn paramObj;\r\n}\r\n\r\n//更新订单状态\r\nfunction updatePayStatus(orderId, type, that, refundReason) {\r\n\tthat.$minApi.uniapp_post(that.$base_api.updateOrder, {\r\n\t\t\torderId: orderId,\r\n\t\t\ttype: type,\r\n\t\t\trefundReason: refundReason\r\n\t\t}).then(res => {\r\n\t\t\tlet orderStatus = 0;\r\n\t\t\tlet tempPayStatus = 201; //201代表订单状态为支付成功\r\n\t\t\tlet refundStatus = 401; //401代表订单状态为退款中\r\n\t\t\torderStatus = type;\r\n\t\t\tif (res.success && type == tempPayStatus) {\r\n\t\t\t\tthat.$openPage('paySuccess');\r\n\t\t\t} else if (res.success && type != tempPayStatus) {\r\n\t\t\t\t// that.$openPage('order');\r\n\t\t\t\tuni.navigateTo('/pages/order/order?orderStatus=999');\r\n\t\t\t} else {\r\n\t\t\t\tthat.$msg('支付成功，更改订单状态失败{}');\r\n\t\t\t\ttype = refundStatus;\r\n\t\t\t\tupdatePayStatus(orderId, type, that, refundReason);\r\n\t\t\t}\r\n\t});\r\n}\r\n\r\nfunction isLogin(that) {\r\n\tlet userId = that.$cache.get(USER_ID_PREFIX);\r\n\treturn !(userId == null || userId == '' || userId == undefined);\r\n}\r\n\r\nfunction hasPhone(that) {\r\n\tlet phone = that.$cache.get(USER_PHONE);\r\n\treturn !(phone == null || phone == '' || phone == undefined);\r\n}\r\n\r\n//校验身份证号\r\nfunction isCardNo(num) {\r\n\tif (isNaN(num)) {\r\n\t\tthis.$msg('输入的身份证号不是数字！');\r\n\t\treturn false;\r\n\t}\r\n\tvar len = num.length;\r\n\tif (len < 15 || len > 18) {\r\n\t\tthis.$msg('输入的身份证号码长度不正确定！应为15位或18位');\r\n\t\treturn false;\r\n\t}\r\n\tvar re15 = /^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$/;\r\n\tvar re18 = /^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{4}$/;\r\n\tvar res = re15.test(num) || re18.test(num);\r\n\tif (res == false) {\r\n\t\tthis.$msg('输入的身份证号格式不正确！');\r\n\t\treturn false;\r\n\t}\r\n\treturn res;\r\n}\r\n\r\n/**\r\n * 验证是否为手机号码（移动手机）\r\n *\r\n * @param {}\r\n *            source\r\n */\r\nfunction isMobilePhone(source) {\r\n\tvar regex = /^((\\(\\d{3}\\))|(\\d{3}\\-))?1\\d{10}/;\r\n\treturn regex.test(source);\r\n}\r\n\r\nexport default {\r\n\tUSER_INFO, //用户信息缓存key\r\n\tUSER_PHONE, //用户手机号缓存key\r\n\tUSER_ID_PREFIX, //用户ID缓存key\r\n\tMALL_ID, //商城ID\r\n\tAUTHORIZATION, //小程序授权\r\n\tRERRESH_TOKEN, //刷新token\r\n\tuploadFile, //上传文件\r\n\tisLogin, //判断是否登录\r\n\thasPhone, //判断是否有手机号\r\n\tisCardNo, //校验身份证号\r\n\tisMobilePhone, //校验手机号\r\n\tCART_LIST, // 未登录时购物车列表\r\n\ttimeOut,\r\n\twxPay,\r\n\tupdatePayStatus,\r\n\tprepareLoginParam\r\n};\r\n"],"sourceRoot":""}