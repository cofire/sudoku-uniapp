{"version":3,"sources":["webpack:///D:/work/2018/cool-web/mall/mall-uniapp/main.js","webpack:///D:/work/2018/cool-web/mall/mall-uniapp/pages/auth/Auth.vue?319d","webpack:///D:/work/2018/cool-web/mall/mall-uniapp/pages/auth/Auth.vue?b989","webpack:///D:/work/2018/cool-web/mall/mall-uniapp/pages/auth/Auth.vue?6c41","webpack:///D:/work/2018/cool-web/mall/mall-uniapp/pages/auth/Auth.vue?f814","webpack:///D:/work/2018/cool-web/mall/mall-uniapp/pages/auth/Auth.vue","webpack:///D:/work/2018/cool-web/mall/mall-uniapp/pages/auth/Auth.vue?df11","webpack:///D:/work/2018/cool-web/mall/mall-uniapp/pages/auth/Auth.vue?e44b"],"names":["createPage","Page","data","USER_ID_PREFIX","global","AUTHORIZATION","USER_INFO","USER_PHONE","logining","nickName","avatarUrl","buttonContent","phone","code","userId","authorization","methods","preparePhoneParam","phone_res","param","Object","iv","detail","encryptedData","mallId","$base_api","MALL_ID","$msg","getPhoneNumber","e","that","uni","login","provider","success","login_res","$minApi","uniapp_post","JSON","stringify","then","res","$cache","set","navigateBack","msg","prepareLoginParam","user_res","userInfo","paramObj","rawData","errMsg","signature","wxLogin","getUserInfo","token"],"mappings":"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","file":"pages/auth/Auth.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/auth/Auth.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./Auth.vue?vue&type=template&id=1c5c66ce&\"\nvar renderjs\nimport script from \"./Auth.vue?vue&type=script&lang=js&\"\nexport * from \"./Auth.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Auth.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"work/2018/cool-web/mall/mall-uniapp/pages/auth/Auth.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Auth.vue?vue&type=template&id=1c5c66ce&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Auth.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Auth.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tUSER_ID_PREFIX: this.global.USER_ID_PREFIX,\n\t\t\tAUTHORIZATION: this.global.AUTHORIZATION,\n\t\t\tUSER_INFO: this.global.USER_INFO,\n\t\t\tUSER_PHONE: this.global.USER_PHONE,\n\t\t\tlogining: false,\n\t\t\tnickName: '',\n\t\t\tavatarUrl: '../../static/icon/tab-my.png',\n\t\t\tbuttonContent: '认证授权',\n\t\t\tphone: '获取手机号',\n\t\t\tcode: '',\n\t\t\tuserId: '',\n\t\t\tauthorization: true\n\t\t}\n\t},\n\tmethods: {\n\t\t//封装获取手机号参数信息\n\t\tpreparePhoneParam(phone_res) {\n\t\t\tlet param = new Object();\n\t\t\tparam.iv = phone_res.detail.iv;\n\t\t\tparam.encryptedData = phone_res.detail.encryptedData;\n\t\t\tparam.userId = this.userId;\n\t\t\tparam.mallId = this.$base_api.MALL_ID;\n\t\t\tif (!this.userId) {\n\t\t\t\tthis.$msg('请先授权，获取openId');\n\t\t\t}\n\t\t\treturn param;\n\t\t},\n\t\t\n\t\t//获取手机号\n\t\tgetPhoneNumber(e) {\n\t\t\t//获取code\n\t\t\tlet that = this;\n\t\t\tuni.login({\n\t\t\t\tprovider: 'weixin',\n\t\t\t\tsuccess(login_res) {\n\t\t\t\t\tlet param = that.preparePhoneParam(e);\n\t\t\t\t\tparam.code = login_res.code;\n\t\t\t\t\tthat.$minApi.uniapp_post(that.$base_api.getPhoneNumber, JSON.stringify(param), 'json').then(res => {\n\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\tthat.phone = res.data;\n\t\t\t\t\t\t\tthat.$cache.set(that.USER_PHONE, res.data);\n\t\t\t\t\t\t\tuni.navigateBack();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthat.$msg('手机号获取失败{}', res.msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\n\t\t//封装登录请求参数\n\t\tprepareLoginParam(user_res) {\n\t\t\tlet userInfo = user_res.userInfo;\n\t\t\tlet paramObj = new Object();\n\t\t\tparamObj.mallId = this.$base_api.MALL_ID;\n\t\t\tuserInfo.iv = user_res.iv;\n\t\t\tuserInfo.rawData = user_res.rawData;\n\t\t\tuserInfo.errMsg = user_res.errMsg;\n\t\t\tuserInfo.signature = user_res.signature;\n\t\t\tuserInfo.encryptedData = user_res.encryptedData;\n\t\t\tparamObj.userInfo = userInfo;\n\t\t\treturn paramObj;\n\t\t},\n\t\n\t\t//小程序授权\n\t\twxLogin(e) {\n\t\t\tlet that = this;\n\t\t\tthis.logining = true;\n\t\t\t//获取code\n\t\t\tuni.login({\n\t\t\t\tprovider: 'weixin',\n\t\t\t\tsuccess(login_res) {\n\t\t\t\t\tuni.getUserInfo({\n\t\t\t\t\t\tsuccess(user_res) {\n\t\t\t\t\t\t\tlet paramObj = that.prepareLoginParam(user_res);\n\t\t\t\t\t\t\tparamObj.code = login_res.code;\n\t\t\t\t\t\t\tthat.$minApi.uniapp_post(that.$base_api.authorization, JSON.stringify(paramObj), 'json').then(res => {\n\t\t\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\t\t\t//userId和openId的值一样\n\t\t\t\t\t\t\t\t\tlet data = res.data;\n\t\t\t\t\t\t\t\t\tlet userId = data.userId;\n\t\t\t\t\t\t\t\t\tlet token = data.token;\n\t\t\t\t\t\t\t\t\tthat.nickName = data.userInfo.nickName;\n\t\t\t\t\t\t\t\t\tthat.avatarUrl = data.userInfo.avatarUrl;\n\t\t\t\t\t\t\t\t\tthat.userId = userId;\n\t\t\t\t\t\t\t\t\tthat.$cache.set(that.USER_ID_PREFIX, userId);\n\t\t\t\t\t\t\t\t\t//小程序登陆有效期设置为7天\n\t\t\t\t\t\t\t\t\tthat.$cache.set(that.AUTHORIZATION, token, 604800);\n\t\t\t\t\t\t\t\t\tthat.$cache.set(that.USER_INFO, data.userInfo);\n\t\t\t\t\t\t\t\t\t// uni.navigateBack({})\n\t\t\t\t\t\t\t\t\tthat.authorization = false;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthat.$msg('小程序认证授权失败{}', res.msg);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthat.logining = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t},\n}\n","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Auth.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Auth.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1586494374626\n      var cssReload = require(\"D:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}