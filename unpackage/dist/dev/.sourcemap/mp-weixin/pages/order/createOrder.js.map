{"version":3,"sources":["webpack:///D:/work/2018/cool-web/mall/mall-uniapp/main.js","webpack:///D:/work/2018/cool-web/mall/mall-uniapp/pages/order/createOrder.vue?3451","webpack:///D:/work/2018/cool-web/mall/mall-uniapp/pages/order/createOrder.vue?72d4","webpack:///D:/work/2018/cool-web/mall/mall-uniapp/pages/order/createOrder.vue?9f82","webpack:///D:/work/2018/cool-web/mall/mall-uniapp/pages/order/createOrder.vue?3ba7","webpack:///D:/work/2018/cool-web/mall/mall-uniapp/pages/order/createOrder.vue","webpack:///D:/work/2018/cool-web/mall/mall-uniapp/pages/order/createOrder.vue?f4e8","webpack:///D:/work/2018/cool-web/mall/mall-uniapp/pages/order/createOrder.vue?7d41"],"names":["createPage","Page","MD5Util","require","data","goodsList","total","maskState","desc","payType","addressData","addressEmpty","productFolderName","orderId","onLoad","option","undefined","JSON","parse","decodeURIComponent","getAddress","calcTotal","onShow","pages","getCurrentPages","currPage","length","console","log","methods","condition","mallId","$base_api","MALL_ID","$minApi","uniapp_post","defaultAddress","then","res","success","Object","keys","addressId","uni","showToast","icon","none","title","msg","submit","duration","creatOrder","that","orderList","forEach","item","userName","phone","address","addressName","detailInfo","houseNumber","stringify","wxPay","stopPrevent","list","price","number","Number","toFixed","totalFee","code","login","provider","login_res","unifiedOrderParam","uniapp_get","unifiedOrder","prepayId","nonceStr","appId","mchKey","timeStamp","String","Date","now","payDataA","payDataB","paySign","MD5","toUpperCase","requestPayment","package","signType","updatePayStatus","fail","err","$msg","$open","updateOrder","$openPage"],"mappings":";;;;;;;;;;kDAAA,wCAAmB;;AAEnB;AACA,yG;AACAA,UAAU,CAACC,oBAAD,CAAV,C;;;;;;;;;;;;;ACJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwH;AACxH;AAC+D;AACL;AACc;;;AAGxE;AAC0L;AAC1L,gBAAgB,2LAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,sFAAM;AACR,EAAE,+FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA2tB,CAAgB,2rBAAG,EAAC,C;;;;;;;;;;;;mICA/uB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,OAAO,GAAGC,mBAAO,CAAC,8BAAD,CAArB,C;AACe;AACdC,MADc,kBACP;AACN,WAAO;AACNC,eAAS,EAAE,EADL;AAENC,WAAK,EAAE,CAFD;AAGNC,eAAS,EAAE,CAHL,EAGQ;AACdC,UAAI,EAAE,EAJA,EAII;AACVC,aAAO,EAAE,CALH,EAKM;AACZC,iBAAW,EAAE,EANP;AAONC,kBAAY,EAAE,KAPR;AAQNC,uBAAiB,EAAE,OARb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","file":"pages/order/createOrder.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/order/createOrder.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./createOrder.vue?vue&type=template&id=3c51438a&\"\nvar renderjs\nimport script from \"./createOrder.vue?vue&type=script&lang=js&\"\nexport * from \"./createOrder.vue?vue&type=script&lang=js&\"\nimport style0 from \"./createOrder.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"work/2018/cool-web/mall/mall-uniapp/pages/order/createOrder.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./createOrder.vue?vue&type=template&id=3c51438a&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./createOrder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./createOrder.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nvar MD5Util = require('../../config/md5.js');\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tgoodsList: [],\r\n\t\t\ttotal: 0,\r\n\t\t\tmaskState: 0, //优惠券面板显示状态\r\n\t\t\tdesc: '', //备注\r\n\t\t\tpayType: 1, //1微信 2支付宝\r\n\t\t\taddressData: {},\r\n\t\t\taddressEmpty: false,\r\n\t\t\tproductFolderName: 'goods',\r\n\t\t\torderId: ''\r\n\t\t};\r\n\t},\r\n\tonLoad(option) {\r\n\t\tif (option == undefined) {\r\n\t\t} else {\r\n\t\t\tthis.goodsList = JSON.parse(decodeURIComponent(option.data));\r\n\t\t}\r\n\t\tthis.getAddress();\r\n\t\tthis.calcTotal();\r\n\t},\r\n\tonShow(option) {\r\n\t\tlet pages = getCurrentPages();\r\n\t\tlet currPage = pages[pages.length - 1];\r\n\t\tthis.addressData = currPage.data.addressData;\r\n\t\tconsole.log('currentPage', this.addressData);\r\n\t\tif (this.addressData !== null) {\r\n\t\t\tthis.addressEmpty = false;\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t// 查询默认收货地址\r\n\t\tgetAddress() {\r\n\t\t\tvar condition = {\r\n\t\t\t\tmallId: this.$base_api.MALL_ID\r\n\t\t\t};\r\n\t\t\tthis.$minApi.uniapp_post(this.$base_api.defaultAddress, condition).then(res => {\r\n\t\t\t\tif (res.success) {\r\n\t\t\t\t\tthis.addressData = res.data;\r\n\t\t\t\t\tif (Object.keys(this.addressData).length == 0 || this.addressData.addressId == null) {\r\n\t\t\t\t\t\tthis.addressEmpty = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: none,\r\n\t\t\t\t\t\ttitle: res.msg\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tsubmit() {\r\n\t\t\tif (this.addressEmpty) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: '请选择收货地址',\r\n\t\t\t\t\tduration: 2000\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.creatOrder();\r\n\t\t},\r\n\r\n\t\tcreatOrder() {\r\n\t\t\tlet that = this;\r\n\t\t\tconsole.log('正在创建订单', this.goodsList);\r\n\t\t\tlet orderList = this.goodsList;\r\n\t\t\torderList.forEach(item => {\r\n\t\t\t\titem.mallId = this.$base_api.MALL_ID;\r\n\t\t\t\titem.userName = this.addressData.userName;\r\n\t\t\t\titem.phone = this.addressData.phone;\r\n\t\t\t\titem.address = this.addressData.addressName + this.addressData.detailInfo + this.addressData.houseNumber;\r\n\t\t\t});\r\n\t\t\tthis.$minApi.uniapp_post(this.$base_api.creatOrder, JSON.stringify(orderList), 'json').then(res => {\r\n\t\t\t\tif (res.success) {\r\n\t\t\t\t\tthat.orderId = res.data;\r\n\t\t\t\t\tthat.wxPay(that.total, that.orderId);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tstopPrevent() {},\r\n\t\t//计算总价\r\n\t\tcalcTotal() {\r\n\t\t\tlet list = this.goodsList;\r\n\t\t\tif (list.length === 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet total = 0;\r\n\t\t\tlist.forEach(item => {\r\n\t\t\t\ttotal += item.price * item.number;\r\n\t\t\t});\r\n\t\t\tthis.total = Number(total.toFixed(2));\r\n\t\t\tconsole.log('total', this.total);\r\n\t\t},\r\n\t\t// 调用微信支付接口\r\n\t\twxPay(totalFee, orderId) {\r\n\t\t\tlet code;\r\n\t\t\tlet that = this;\r\n\t\t\tuni.login({\r\n\t\t\t\tprovider: 'weixin',\r\n\t\t\t\tsuccess(login_res) {\r\n\t\t\t\t\tlet unifiedOrderParam = new Object();\r\n\t\t\t\t\tunifiedOrderParam.orderId = orderId;\r\n\t\t\t\t\tunifiedOrderParam.code = login_res.code;\r\n\t\t\t\t\tthat.$minApi.uniapp_get(that.$base_api.unifiedOrder, unifiedOrderParam).then(res => {\r\n\t\t\t\t\t\tif (res.success) {\r\n\t\t\t\t\t\t\tlet prepayId = res.data.prepayId;\r\n\t\t\t\t\t\t\tlet nonceStr = res.data.nonceStr;\r\n\t\t\t\t\t\t\tlet appId = res.data.appId;\r\n\t\t\t\t\t\t\tlet mchKey = res.data.mchKey;\r\n\t\t\t\t\t\t\tlet timeStamp = String(Date.now());\r\n\t\t\t\t\t\t\tlet payDataA = 'appId=' + appId + '&nonceStr=' + nonceStr + '&package=prepay_id=' + prepayId + '&signType=MD5&timeStamp=' + timeStamp;\r\n\t\t\t\t\t\t\tlet payDataB = payDataA + '&key=' + mchKey;\r\n\t\t\t\t\t\t\tlet paySign = MD5Util.MD5(payDataB).toUpperCase();\r\n\t\t\t\t\t\t\tconsole.log('签名的字符串', paySign);\r\n\t\t\t\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\t\t\t\tprovider: 'wxpay',\r\n\t\t\t\t\t\t\t\ttimeStamp: timeStamp,\r\n\t\t\t\t\t\t\t\tnonceStr: nonceStr,\r\n\t\t\t\t\t\t\t\tpackage: 'prepay_id=' + prepayId,\r\n\t\t\t\t\t\t\t\tsignType: 'MD5',\r\n\t\t\t\t\t\t\t\tpaySign: paySign,\r\n\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\tthat.updatePayStatus(orderId);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\t\t\t\tthat.$msg('订单支付失败，请重新支付', JSON.stringify(err));\r\n\t\t\t\t\t\t\t\t\tthat.$open('order');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthat.$msg('调用统一下单接口失败{}', res.msg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t//订单金额\r\n\t\tupdatePayStatus(orderId) {\r\n\t\t\tlet that = this;\r\n\t\t\tthat.$minApi.uniapp_post(that.$base_api.updateOrder, { orderId: orderId }).then(res => {\r\n\t\t\t\tif (res.success) {\r\n\t\t\t\t\tthat.$openPage('paySuccess');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthat.$msg('支付成功，更改订单状态失败{}');\r\n\t\t\t\t\tthat.$openPage('order');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./createOrder.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./createOrder.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1586498305015\n      var cssReload = require(\"D:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}